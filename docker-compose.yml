version: '3'

networks:
  default:
    external:
      name: nginx-proxy

services:

### NGINX Server #########################################
    nginx:
      build: ./nginx
      ports:
        - "80"
        # - "${NGINX_HOST_HTTP_PORT}:80"
        # - "${NGINX_HOST_HTTPS_PORT}:443"
      volumes:
        - ./:/var/www:cached
        - ./logs/nginx/:/var/log/nginx
        - ./nginx/sites/:/etc/nginx/sites-available
        - ./nginx/ssl/:/etc/nginx/ssl
      environment:
        VIRTUAL_HOST: www.irabu.co.tz, irabu.co.tz, irabu.dev
        LETSENCRYPT_HOST: www.irabu.co.tz, irabu.co.tz, irabu.dev
        LETSENCRYPT_EMAIL: info@irabu.co.tz
      networks:
        - default
